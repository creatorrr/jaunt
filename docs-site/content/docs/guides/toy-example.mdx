---
title: Toy Example
description: A tiny consumer project under toy-example/ you can run end-to-end.
---

This repo includes a small runnable consumer project at `toy-example/`. It demonstrates:

- A couple of `@jaunt.magic` spec stubs (implementation intent).
- A few `@jaunt.test` specs (test intent).
- Generated output under `__generated__/`.

## Project Layout

```text
toy-example/
  jaunt.toml
  src/toy_app/email_specs.py
  tests/specs_email.py
```

## Configuration (`jaunt.toml`)

This example points Jaunt at `src/` for build specs and discovers tests from the project root:

```toml
version = 1

[paths]
source_roots = ["src"]
test_roots = ["."]
generated_dir = "__generated__"

[llm]
provider = "openai"
model = "gpt-4.1-mini"
api_key_env = "OPENAI_API_KEY"
```

## Spec Stubs (`@jaunt.magic`)

`toy-example/src/toy_app/email_specs.py` (excerpt):

```python
import jaunt


@jaunt.magic()
def normalize_email(raw: str) -> str:
    """
    Normalize an email address for stable comparisons.

    Rules:
    - Strip surrounding whitespace.
    - Lowercase the entire string.
    - Must contain exactly one "@".
    - Local-part and domain must both be non-empty after splitting.
    - Domain must contain at least one "." (example: "example.com").

    Errors:
    - Raise ValueError if `raw` is invalid by the rules above.
    """


@jaunt.magic(deps=[normalize_email])
def is_corporate_email(raw: str, *, domain: str = "example.com") -> bool:
    """
    Return True iff `normalize_email(raw)` belongs to `domain`.
    """
```

The docstrings and type hints are the “contract” that the backend uses for generation.

## Test Specs (`@jaunt.test`)

These are “intent stubs” that describe what generated pytest tests should do.

`toy-example/tests/specs_email.py` (excerpt):

```python
import jaunt


@jaunt.test()
def test_normalize_email__rejects_invalid_inputs() -> None:
    """
    Invalid inputs should raise ValueError:
    - "" (empty)
    - "no-at-sign"
    - "@example.com"
    - "a@"
    - "a@example" (domain missing dot)
    - "a@@example.com" (more than one @)
    """
    import pytest
    from toy_app.email_specs import normalize_email

    for raw in ["", "no-at-sign", "@example.com", "a@", "a@example", "a@@example.com"]:
        with pytest.raises(ValueError):
            normalize_email(raw)
```

## Generated Output (Excerpt)

After `jaunt build`, Jaunt writes a real Python module under `src/toy_app/__generated__/...`:

```python
# This file was generated by jaunt. DO NOT EDIT.
# jaunt:kind=build
# jaunt:source_module=toy_app.email_specs

def normalize_email(raw: str) -> str:
    raw = raw.strip().lower()
    if raw.count('@') != 1:
        raise ValueError(f"Invalid email address: must contain exactly one '@': {raw!r}")
    local, domain = raw.split('@', 1)
    if not local:
        raise ValueError(f"Invalid email address: local part is empty: {raw!r}")
    if '.' not in domain:
        raise ValueError(f"Invalid email address: domain must contain at least one '.': {raw!r}")
    return f"{local}@{domain}"
```

After `jaunt test`, Jaunt writes runnable pytest tests under `tests/__generated__/...`:

```python
# This file was generated by jaunt. DO NOT EDIT.
# jaunt:kind=test
# jaunt:source_module=tests.specs_email

def test_normalize_email__lowercases_and_strips() -> None:
    from toy_app.email_specs import normalize_email
    assert normalize_email("  A.B+tag@Example.COM  ") == "a.b+tag@example.com"
```

## Run It

This will call the OpenAI API.

From the Jaunt repo root:

```bash
uv sync
export OPENAI_API_KEY=...

# 1) Generate implementation modules for @jaunt.magic specs.
uv run jaunt build --root toy-example

# 2) Generate pytest tests for @jaunt.test specs and run them.
uv run jaunt test --root toy-example

# 3) Call the generated implementation via the runtime wrappers.
PYTHONPATH=toy-example/src uv run python - <<'PY'
from toy_app.email_specs import is_corporate_email, normalize_email

print(normalize_email("  A.B+tag@Example.COM  "))
print(is_corporate_email("User@example.com"))
print(is_corporate_email("User@other.com"))
PY
```
